{% extends "base.html" %}

{% block title %}GemmaVision | Offline Mode{% endblock %}

{% block content %}
<div class="text-center my-5">
  <h1 class="display-3 fw-bold">
    <span class="text-primary">Gemma</span><span class="text-danger">Vision</span>
  </h1>
  <p class="lead fst-italic text-muted mt-2">
    Offline demo mode – showcasing incident types with static sample images and descriptions.
  </p>

  <div class="mt-4">
    <span class="badge bg-danger me-2">Abuse</span>
    <span class="badge bg-warning text-dark me-2">Burglary</span>
    <span class="badge bg-info text-dark me-2">Robbery</span>
    <span class="badge bg-success me-2">Stealing</span>
    <span class="badge bg-dark me-2">Shooting</span>
    <span class="badge bg-primary me-2">Shoplifting</span>
    <span class="badge bg-secondary me-2">Assault</span>
    <span class="badge bg-danger me-2">Fighting</span>
    <span class="badge bg-warning text-dark me-2">Arson</span>
    <span class="badge bg-secondary me-2">Explosion</span>
    <span class="badge bg-primary me-2">Traffic Accident</span>
  </div>

  <p class="text-muted small mt-2 text-center">
    Note: This preview is for demonstration purposes only. Live results are powered by our fine-tuned Gemini 3 model through advanced prompt engineering.
  </p>

  <hr class="my-4">

  <!-- Offline cards -->
  <div class="row g-4 mb-3">
    <div class="alert alert-warning text-center small" role="alert">
  <strong>Warning:</strong> Images have been blurred due to potential sensitive content.
</div>
    {% for cam in static_cameras %}
    <div class="col-md-6">
    <div class="card shadow-sm border-0">
        <img
        src="/camera/{{ cam.id }}/offline"
        alt="Sample for {{ cam.name }}"
        class="img-fluid rounded-top"
        style="height: 250px; object-fit: cover; background-color: #f0f0f0; filter: blur(5px);"
        />
        <div class="card-body">
        <div class="d-flex justify-content-between align-items-start mb-2">
            <div>
            <h5 class="card-title mb-1">Example from Dataset #{{ cam.id }}</h5>
            <p class="card-text text-muted mb-1">{{ cam.name }}</p>
            </div>
            <span class="badge bg-secondary mt-1">Offline Demo</span>
        </div>

        <p class="small text-secondary mb-2">{{ cam.description }}</p>

        <div class="text-muted small mb-2">
        <strong>Recommendation:</strong>
        {% if cam.recommendation == 'normal' %}
            ✅ No action required
        {% elif cam.recommendation == 'abuse' %}
            🚨 Possible abuse – alert authorities
        {% elif cam.recommendation == 'arrest' %}
            🚓 Police action – arrest situation
        {% elif cam.recommendation == 'arson' %}
            🔥 Fire suspected – call fire department
        {% elif cam.recommendation == 'assault' %}
            👊 Assault – contact law enforcement
        {% elif cam.recommendation in ['accident', 'car crash'] %}
            🚑 Accident – request emergency services
        {% elif cam.recommendation == 'burglary' %}
            🏠🔓 Burglary – notify police
        {% elif cam.recommendation == 'explosion' %}
            💥 Explosion – fire or bomb squad needed
        {% elif cam.recommendation == 'fighting' %}
            🤼 Fight detected – intervene or call police
        {% elif cam.recommendation == 'robbery' %}
            🏦💰 Robbery – immediate police response
        {% elif cam.recommendation == 'shooting' %}
            🔫 Shooting – high alert, call authorities
        {% elif cam.recommendation == 'stealing' %}
            🛍️💸 Theft detected – report
        {% elif cam.recommendation == 'shoplifting' %}
            🛒💸 Shoplifting – notify security
        {% elif cam.recommendation == 'vandalism' %}
            🎨🧱 Vandalism – damage to property
        {% else %}
            ⚠️ Unknown activity – review footage
        {% endif %}
        </div>

        <!-- Demo Call Button -->
        <button type="button" class="btn btn-outline-danger btn-sm" disabled title="Demo only – not active">
        📞 Call Emergency (Demo)
        </button>

        </div>
    </div>
    </div>
    {% endfor %}
  </div>
{% endblock %}
